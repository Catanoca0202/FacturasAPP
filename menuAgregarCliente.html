<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/css/bootstrap.min.css" />
  <style>
    .top-right {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
    }
    .center-text {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="top-right">
    <button type="button" class="btn btn-secondary" onclick="Back()">Back</button>
  </div>
  <h3>Agregar producto</h3>
  <p class="center-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  
  <form id="productForm">
    <div class="form-group">
      <label for="cantidad">Cantidad</label>
      <input type="number" class="form-control" id="cantidad" placeholder="Cantidad">
    </div>
    <div class="form-group">
      <label for="buscarProducto">Buscar producto</label>
      <input type="text" class="form-control" id="buscarProducto" placeholder="Buscar producto" onkeypress="buscarProducto()">
      <div id="resultadosBusqueda" class="list-group mt-2"></div>
    </div>
    <button type="button" class="btn btn-primary" onclick="agregarProducto()">Agregar producto</button>
  </form>
  
  <script>
    function Back() {
      google.script.run.showNuevaFactura();
    }

    function buscarProducto() {
      Logger.log("buscarProducto")
      const query = document.getElementById('buscarProducto').value;
      google.script.run.withSuccessHandler(mostrarResultados).buscarProductos(query);
    }

    function mostrarResultados(resultados) {
      const resultadosDiv = document.getElementById('resultadosBusqueda');
      resultadosDiv.innerHTML = '';
      resultados.forEach(producto => {
        const item = document.createElement('a');
        item.href = '#';
        item.className = 'list-group-item list-group-item-action';
        item.innerText = `${producto.nombre} (Código: ${producto.codigo})`;
        item.onclick = () => seleccionarProducto(producto);
        resultadosDiv.appendChild(item);
      });
    }

    function seleccionarProducto(producto) {
      // Aquí puedes definir cómo quieres manejar la selección del producto
      console.log('Producto seleccionado:', producto);
    }

    function agregarProducto() {
      // Funcionalidad futura para agregar productos
    }
  </script>
</body>
</html>
